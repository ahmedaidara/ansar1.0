<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ansar Projet</title>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/emailjs-com@3.2.0/dist/email.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;600;700&family=Open+Sans:wght@300;400;600;700&display=swap');
        
        :root {
            --primary-color: #073332;
            --secondary-color: #1f4a49;
            --accent-color: #9b9c28;
            --accent-glow: rgba(155, 156, 40, 0.4);
            --bg-color: #073332;
            --text-color: #ffffff;
            --text-muted: rgba(255, 255, 255, 0.7);
        }
        
        body {
            font-family: 'Open Sans', sans-serif;
            background: var(--bg-color);
            color: var(--text-color);
            min-height: 100vh;
            overflow-x: hidden;
        }
        
        .holographic-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: 
                radial-gradient(
                    circle at 30% 40%, 
                    var(--secondary-color) 0%, 
                    transparent 25%),
                radial-gradient(
                    circle at 70% 60%, 
                    var(--primary-color) 0%, 
                    transparent 25%);
            opacity: 0.4;
            z-index: -1;
            animation: bgRotate 60s linear infinite;
        }
        
        @keyframes bgRotate {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .ansar-glass {
            background: rgba(7, 51, 50, 0.6);
            backdrop-filter: blur(16px);
            border: 1px solid rgba(155, 156, 40, 0.2);
            box-shadow: 
                0 8px 32px rgba(0, 0, 0, 0.3),
                0 0 0 1px rgba(155, 156, 40, 0.1),
                inset 0 0 30px rgba(31, 74, 73, 0.3);
            border-radius: 20px;
        }
        
        .holographic-effect {
            position: relative;
            overflow: hidden;
        }
        
        .holographic-effect::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(
                to bottom right,
                transparent,
                transparent,
                transparent,
                var(--accent-glow),
                transparent
            );
            transform: rotate(30deg);
            animation: hologram 8s linear infinite;
            z-index: -1;
        }
        
        @keyframes hologram {
            0% { transform: translateY(-100%) rotate(30deg); }
            100% { transform: translateY(100%) rotate(30deg); }
        }
        
        .counter-display {
            font-family: 'Orbitron', sans-serif;
            text-shadow: 0 0 15px var(--accent-glow);
            transition: all 0.3s ease;
        }
        
        .btn-ansar {
            background: linear-gradient(135deg, rgba(155, 156, 40, 0.2), transparent);
            border: 1px solid var(--accent-color);
            color: var(--text-color);
            font-family: 'Orbitron', sans-serif;
            font-weight: 600;
            letter-spacing: 1px;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            cursor: pointer;
        }
        
        .btn-ansar:hover {
            background: linear-gradient(135deg, rgba(155, 156, 40, 0.3), transparent);
            box-shadow: 0 0 20px var(--accent-glow);
            transform: translateY(-2px);
        }
        
        .btn-ansar::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(
                90deg,
                transparent,
                rgba(155, 156, 40, 0.2),
                transparent
            );
            transition: all 0.6s ease;
        }
        
        .btn-ansar:hover::before {
            left: 100%;
        }
        
        .notification {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(7, 51, 50, 0.9);
            border: 1px solid var(--accent-color);
            color: var(--accent-color);
            padding: 20px 40px;
            border-radius: 12px;
            font-size: 24px;
            font-weight: bold;
            font-family: 'Orbitron', sans-serif;
            z-index: 100;
            display: none;
            box-shadow: 0 0 30px var(--accent-glow);
            text-shadow: 0 0 10px var(--accent-glow);
        }
        
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.7);
            z-index: 200;
            justify-content: center;
            align-items: center;
        }
        
        .modal-content {
            background: rgba(7, 51, 50, 0.9);
            border: 1px solid var(--accent-color);
            padding: 30px;
            border-radius: 16px;
            width: 90%;
            max-width: 400px;
            text-align: center;
            box-shadow: 0 0 40px var(--accent-glow);
        }
        
        .modal-title {
            font-family: 'Orbitron', sans-serif;
            font-size: 20px;
            margin-bottom: 20px;
            color: var(--accent-color);
        }
        
        .modal-input {
            width: 100%;
            padding: 15px;
            font-size: 18px;
            background: rgba(31, 74, 73, 0.5);
            border: 1px solid var(--accent-color);
            border-radius: 8px;
            margin-bottom: 20px;
            text-align: center;
            color: var(--text-color);
            font-family: 'Orbitron', sans-serif;
        }
        
        .modal-input:focus {
            outline: none;
            box-shadow: 0 0 10px var(--accent-glow);
        }
        
        .form-input {
            background: rgba(31, 74, 73, 0.5);
            border: 1px solid var(--accent-color);
            color: var(--text-color);
            border-radius: 8px;
            padding: 12px 15px;
            width: 100%;
            transition: all 0.3s ease;
        }
        
        .form-input:focus {
            outline: none;
            box-shadow: 0 0 10px var(--accent-glow);
            border-color: var(--accent-color);
        }
        
        .form-label {
            display: block;
            margin-bottom: 8px;
            color: var(--accent-color);
            font-weight: 600;
        }
        
        .form-radio {
            accent-color: var(--accent-color);
        }
        
        .form-checkbox {
            accent-color: var(--accent-color);
        }
        
        .business-card {
            transition: all 0.3s ease;
            background: rgba(7, 51, 50, 0.6);
            border: 1px solid rgba(155, 156, 40, 0.2);
            border-radius: 16px;
            overflow: hidden;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }
        
        .business-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 40px var(--accent-glow);
        }
        
        .hidden-section {
            display: none !important;
        }
        
        .form-container {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.5s ease-out;
        }
        
        .form-container.active {
            max-height: 1500px;
            transition: max-height 0.8s ease-in;
        }
        
        @media (max-width: 640px) {
            .counter-display {
                font-size: 3rem;
            }
        }
    </style>
</head>
<body>
    <div class="holographic-bg"></div>
    
    <div class="min-h-screen flex flex-col items-center justify-center p-4">
        <!-- Conteneur principal -->
        <div class="ansar-glass w-full max-w-4xl overflow-hidden p-6 holographic-effect">
            <!-- En-tête -->
            <header class="text-center mb-8 projet-header">
                <h1 class="text-4xl font-bold mb-2 font-['Orbitron'] text-transparent bg-clip-text bg-gradient-to-r from-white to-[var(--accent-color)]">
                    ANSAR PROJET
                </h1>
                <p class="text-[var(--accent-color)]">Plateforme de développement professionnel</p>
            </header>

            <!-- Interface principale -->
            <div id="main-interface">
                <!-- Boutons principaux -->
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8 projet-buttons">
                    <button onclick="showProjetSection('promotion')" class="btn-ansar py-4 px-6 rounded-lg flex flex-col items-center justify-center">
                        <i class="fas fa-bullhorn text-2xl mb-2"></i>
                        Promotion des Métiers
                    </button>
                    <button onclick="showProjetSection('financement')" class="btn-ansar py-4 px-6 rounded-lg flex flex-col items-center justify-center">
                        <i class="fas fa-money-bill-wave text-2xl mb-2"></i>
                        Financement d'un Projet
                    </button>
                    <button onclick="showProjetSection('business')" class="btn-ansar py-4 px-6 rounded-lg flex flex-col items-center justify-center">
                        <i class="fas fa-briefcase text-2xl mb-2"></i>
                        Business
                    </button>
                </div>

                <!-- Lien admin -->
                <div class="text-center mt-6 admin-link">
                    <a href="#" onclick="showProjetAdmin(); return false;" class="text-[var(--accent-color)] hover:text-white underline">Espace réservé aux membres</a>
                </div>
            </div>

            <!-- Formulaire de promotion -->
            <div id="promotion-form" class="form-container hidden-section">
                <button onclick="showMainInterface()" class="btn-ansar mb-6 py-2 px-4 rounded-lg">
                    <i class="fas fa-arrow-left mr-2"></i> Retour
                </button>
                
                <div class="ansar-glass rounded-xl p-6">
                    <h2 class="text-2xl font-bold text-center mb-6 font-['Orbitron']">Promotion des Métiers</h2>
                    <p class="text-center text-[var(--accent-color)]/80 mb-6">Objectif : Mettre en avant les compétences des membres</p>
                    
                    <form id="promotionForm" class="space-y-6">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <label class="form-label" for="nom">Nom & Prénom</label>
                                <input type="text" id="nom" class="form-input" required>
                            </div>
                            <div>
                                <label class="form-label" for="dob">Date de Naissance</label>
                                <input type="date" id="dob" class="form-input" required>
                            </div>
                        </div>
                        
                        <div>
                            <label class="form-label">Êtes-vous membre de l'association ?</label>
                            <div class="flex space-x-4">
                                <label class="inline-flex items-center">
                                    <input type="radio" name="membre" value="oui" class="form-radio h-5 w-5" required>
                                    <span class="ml-2">Oui</span>
                                </label>
                                <label class="inline-flex items-center">
                                    <input type="radio" name="membre" value="non" class="form-radio h-5 w-5">
                                    <span class="ml-2">Non</span>
                                </label>
                            </div>
                        </div>
                        
                        <div>
                            <label class="form-label" for="metier">Métier</label>
                            <input type="text" id="metier" class="form-input" required>
                        </div>
                        
                        <div>
                            <label class="form-label" for="experience">Années d'expérience</label>
                            <input type="number" id="experience" min="0" class="form-input" required>
                        </div>
                        
                        <div>
                            <label class="form-label" for="description">Description</label>
                            <textarea id="description" rows="4" class="form-input" required></textarea>
                        </div>
                        
                        <div>
                            <label class="form-label" for="adresse">Emplacement (Adresse)</label>
                            <input type="text" id="adresse" class="form-input" required>
                        </div>
                        
                        <div>
                            <label class="form-label" for="contact">Contact</label>
                            <input type="tel" id="contact" class="form-input" required>
                        </div>
                        
                        <div>
                            <label class="form-label" for="email">Adresse Gmail <span class="text-red-500">*</span></label>
                            <input type="email" id="email" class="form-input" required>
                        </div>
                        
                        <div class="pt-4">
                            <label class="form-label">J'ai besoin de :</label>
                            <div class="flex flex-wrap gap-4">
                                <label class="inline-flex items-center">
                                    <input type="checkbox" name="besoins" value="site web" class="form-checkbox h-5 w-5">
                                    <span class="ml-2">Un site web</span>
                                </label>
                                <label class="inline-flex items-center">
                                    <input type="checkbox" name="besoins" value="affiche" class="form-checkbox h-5 w-5">
                                    <span class="ml-2">Une affiche</span>
                                </label>
                                <label class="inline-flex items-center">
                                    <input type="checkbox" name="besoins" value="portfolio" class="form-checkbox h-5 w-5">
                                    <span class="ml-2">Un portfolio</span>
                                </label>
                            </div>
                        </div>
                        
                        <div class="flex justify-end pt-6">
                            <button type="button" onclick="submitPromotionForm()" class="btn-ansar py-3 px-6 rounded-lg">
                                Envoyer mon dossier
                            </button>
                        </div>
                    </form>
                </div>
            </div>

            <!-- Formulaire de financement -->
            <div id="financement-form" class="form-container hidden-section">
                <button onclick="showMainInterface()" class="btn-ansar mb-6 py-2 px-4 rounded-lg">
                    <i class="fas fa-arrow-left mr-2"></i> Retour
                </button>
                
                <div class="ansar-glass rounded-xl p-6">
                    <h2 class="text-2xl font-bold text-center mb-6 font-['Orbitron']">Financement d'un Projet</h2>
                    
                    <form id="financementForm" class="space-y-6">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <label class="form-label" for="f-nom">Nom & Prénom</label>
                                <input type="text" id="f-nom" class="form-input" required>
                            </div>
                            <div>
                                <label class="form-label" for="f-dob">Date de Naissance</label>
                                <input type="date" id="f-dob" class="form-input" required>
                            </div>
                        </div>
                        
                        <div>
                            <label class="form-label">Êtes-vous membre de l'association ?</label>
                            <div class="flex space-x-4">
                                <label class="inline-flex items-center">
                                    <input type="radio" name="f-membre" value="oui" class="form-radio h-5 w-5" required>
                                    <span class="ml-2">Oui</span>
                                </label>
                                <label class="inline-flex items-center">
                                    <input type="radio" name="f-membre" value="non" class="form-radio h-5 w-5">
                                    <span class="ml-2">Non</span>
                                </label>
                            </div>
                        </div>
                        
                        <div>
                            <label class="form-label" for="titre-projet">Titre de votre projet <span class="text-red-500">*</span></label>
                            <input type="text" id="titre-projet" class="form-input" required>
                        </div>
                        
                        <div>
                            <label class="form-label" for="description-projet">Description détaillée <span class="text-red-500">*</span></label>
                            <textarea id="description-projet" rows="4" class="form-input" required></textarea>
                        </div>
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <label class="form-label" for="budget">Budget <span class="text-red-500">*</span></label>
                                <input type="number" id="budget" min="0" class="form-input" required>
                            </div>
                            <div>
                                <label class="form-label" for="delai">Délai <span class="text-red-500">*</span></label>
                                <input type="text" id="delai" class="form-input" placeholder="Ex: 3 mois" required>
                            </div>
                        </div>
                        
                        <div class="pt-4">
                            <label class="form-label">J'ai besoin de :</label>
                            <div class="flex flex-wrap gap-4">
                                <label class="inline-flex items-center">
                                    <input type="checkbox" name="f-besoins" value="site web" class="form-checkbox h-5 w-5">
                                    <span class="ml-2">Un site web</span>
                                </label>
                                <label class="inline-flex items-center">
                                    <input type="checkbox" name="f-besoins" value="affiche" class="form-checkbox h-5 w-5">
                                    <span class="ml-2">Une affiche</span>
                                </label>
                                <label class="inline-flex items-center">
                                    <input type="checkbox" name="f-besoins" value="portfolio" class="form-checkbox h-5 w-5">
                                    <span class="ml-2">Un portfolio</span>
                                </label>
                            </div>
                        </div>
                        
                        <div class="flex justify-end pt-6">
                            <button type="button" onclick="submitFinancementForm()" class="btn-ansar py-3 px-6 rounded-lg">
                                Envoyer mon dossier
                            </button>
                        </div>
                    </form>
                </div>
            </div>

            <!-- Section Business -->
            <div id="business-section" class="hidden-section">
                <button onclick="showMainInterface()" class="btn-ansar mb-6 py-2 px-4 rounded-lg">
                    <i class="fas fa-arrow-left mr-2"></i> Retour
                </button>
                
                <div class="ansar-glass rounded-xl p-6">
                    <h2 class="text-2xl font-bold text-center mb-8 font-['Orbitron']">Nos Professionnels</h2>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6" id="business-cards">
                        <!-- Les cartes seront générées dynamiquement -->
                    </div>
                </div>
            </div>

            <!-- Modal Business Details -->
            <div id="business-modal" class="modal hidden-section">
                <div class="modal-content">
                    <div class="flex justify-between items-start mb-4">
                        <h3 id="modal-title" class="modal-title"></h3>
                        <button onclick="hideBusinessDetails()" class="text-[var(--accent-color)] hover:text-white">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    
                    <div id="modal-content" class="space-y-4">
                        <!-- Content will be loaded here -->
                    </div>
                    
                    <div class="mt-6 flex justify-end">
                        <button onclick="hideBusinessDetails()" class="btn-ansar py-2 px-4 rounded">
                            Fermer
                        </button>
                    </div>
                </div>
            </div>

            <!-- Messages de succès -->
            <div id="success-promotion" class="modal hidden-section">
                <div class="modal-content">
                    <div class="text-green-500 text-5xl mb-4">
                        <i class="fas fa-check-circle"></i>
                    </div>
                    <h3 class="text-2xl font-bold mb-4">Merci !</h3>
                    <p class="mb-6" id="success-promotion-message">Le groupe Ansar projet vous contactera dans un délai de 48 à 72h.</p>
                    <button onclick="hideSuccessMessage('promotion')" class="btn-ansar py-2 px-6 rounded-lg">
                        OK
                    </button>
                </div>
            </div>

            <div id="success-financement" class="modal hidden-section">
                <div class="modal-content">
                    <div class="text-green-500 text-5xl mb-4">
                        <i class="fas fa-check-circle"></i>
                    </div>
                    <h3 class="text-2xl font-bold mb-4">Merci !</h3>
                    <p class="mb-6" id="success-financement-message">Le groupe Ansar projet vous contactera dans un délai de 3 à 5 jours.</p>
                    <button onclick="hideSuccessMessage('financement')" class="btn-ansar py-2 px-6 rounded-lg">
                        OK
                    </button>
                </div>
            </div>

            <!-- Section Admin -->
            <div id="admin-section" class="modal hidden-section">
                <div class="modal-content">
                    <h2 class="modal-title">ESPACE RÉSERVÉ À L'ADMINISTRATION</h2>
                    
                    <div class="space-y-4">
                        <div>
                            <label class="form-label" for="code1">Code secret 1</label>
                            <input type="password" id="code1" class="form-input">
                        </div>
                        
                        <div>
                            <label class="form-label" for="code2">Code secret 2</label>
                            <input type="password" id="code2" class="form-input">
                        </div>
                        
                        <div class="pt-4 flex justify-between">
                            <button onclick="hideAdminSection()" class="btn-ansar py-2 px-4 rounded">
                                Annuler
                            </button>
                            <button onclick="verifyAdminCodes()" class="btn-ansar py-2 px-4 rounded">
                                Valider
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Tableau de bord Admin -->
            <div id="admin-dashboard" class="hidden-section">
                <button onclick="showMainInterface()" class="btn-ansar mb-6 py-2 px-4 rounded-lg">
                    <i class="fas fa-arrow-left mr-2"></i> Retour
                </button>
                
                <div class="ansar-glass rounded-xl p-6">
                    <h2 class="text-3xl font-bold text-center mb-6 font-['Orbitron']">Tableau de bord Admin</h2>
                    
                    <div class="flex flex-wrap justify-center gap-4 mb-8">
                        <button onclick="showAdminForm('promotion')" class="btn-ansar py-3 px-6 rounded-lg">
                            <i class="fas fa-bullhorn mr-2"></i> Ajouter Métier
                        </button>
                        <button onclick="showAdminForm('financement')" class="btn-ansar py-3 px-6 rounded-lg">
                            <i class="fas fa-money-bill-wave mr-2"></i> Ajouter Projet
                        </button>
                        <button onclick="showAdminBusinessList()" class="btn-ansar py-3 px-6 rounded-lg">
                            <i class="fas fa-briefcase mr-2"></i> Gérer Business
                        </button>
                        <button onclick="showAdminProjectList()" class="btn-ansar py-3 px-6 rounded-lg">
                            <i class="fas fa-project-diagram mr-2"></i> Gérer Projets
                        </button>
                    </div>

                    <!-- Formulaire Admin Promotion -->
                    <div id="admin-promotion-form" class="form-container hidden-section">
                        <div class="ansar-glass rounded-xl p-6">
                            <h2 class="text-2xl font-bold text-center mb-6 font-['Orbitron']">Ajouter un Métier</h2>
                            
                            <form id="adminPromotionForm" class="space-y-6">
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                    <div>
                                        <label class="form-label" for="a-nom">Nom & Prénom</label>
                                        <input type="text" id="a-nom" class="form-input" required>
                                    </div>
                                    <div>
                                        <label class="form-label" for="a-dob">Date de Naissance</label>
                                        <input type="date" id="a-dob" class="form-input">
                                    </div>
                                </div>
                                
                                <div>
                                    <label class="form-label" for="a-membre">Membre de l'association</label>
                                    <select id="a-membre" class="form-input">
                                        <option value="oui">Oui</option>
                                        <option value="non">Non</option>
                                    </select>
                                </div>
                                
                                <div>
                                    <label class="form-label" for="a-metier">Métier</label>
                                    <input type="text" id="a-metier" class="form-input" required>
                                </div>
                                
                                <div>
                                    <label class="form-label" for="a-experience">Années d'expérience</label>
                                    <input type="number" id="a-experience" min="0" class="form-input" required>
                                </div>
                                
                                <div>
                                    <label class="form-label" for="a-description">Description</label>
                                    <textarea id="a-description" rows="4" class="form-input" required></textarea>
                                </div>
                                
                                <div>
                                    <label class="form-label" for="a-adresse">Emplacement (Adresse)</label>
                                    <input type="text" id="a-adresse" class="form-input" required>
                                </div>
                                
                                <div>
                                    <label class="form-label" for="a-contact">Contact</label>
                                    <input type="tel" id="a-contact" class="form-input" required>
                                </div>
                                
                                <div>
                                    <label class="form-label" for="a-email">Adresse Email</label>
                                    <input type="email" id="a-email" class="form-input">
                                </div>
                                
                                <div>
                                    <label class="form-label" for="a-image">Lien de l'image</label>
                                    <input type="url" id="a-image" class="form-input" placeholder="https://example.com/image.jpg">
                                </div>
                                
                                <div>
                                    <label class="form-label" for="a-website">Site Web</label>
                                    <input type="url" id="a-website" class="form-input" placeholder="https://example.com">
                                </div>
                                
                                <div>
                                    <label class="form-label" for="a-portfolio">Portfolio</label>
                                    <input type="url" id="a-portfolio" class="form-input" placeholder="https://portfolio.example.com">
                                </div>
                                
                                <div class="pt-4">
                                    <label class="form-label">Services proposés</label>
                                    <div class="flex flex-wrap gap-4">
                                        <label class="inline-flex items-center">
                                            <input type="checkbox" name="a-services" value="site web" class="form-checkbox h-5 w-5">
                                            <span class="ml-2">Site web</span>
                                        </label>
                                        <label class="inline-flex items-center">
                                            <input type="checkbox" name="a-services" value="affiche" class="form-checkbox h-5 w-5">
                                            <span class="ml-2">Affiche</span>
                                        </label>
                                        <label class="inline-flex items-center">
                                            <input type="checkbox" name="a-services" value="portfolio" class="form-checkbox h-5 w-5">
                                            <span class="ml-2">Portfolio</span>
                                        </label>
                                    </div>
                                </div>
                                
                                <div class="flex justify-end pt-6">
                                    <button type="button" onclick="saveBusiness()" class="btn-ansar py-3 px-6 rounded-lg">
                                        Enregistrer
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>
                    
                    <!-- Formulaire Admin Financement -->
                    <div id="admin-financement-form" class="form-container hidden-section">
                        <div class="ansar-glass rounded-xl p-6">
                            <h2 class="text-2xl font-bold text-center mb-6 font-['Orbitron']">Ajouter un Projet</h2>
                            
                            <form id="adminFinancementForm" class="space-y-6">
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                    <div>
                                        <label class="form-label" for="af-nom">Nom & Prénom</label>
                                        <input type="text" id="af-nom" class="form-input" required>
                                    </div>
                                    <div>
                                        <label class="form-label" for="af-dob">Date de Naissance</label>
                                        <input type="date" id="af-dob" class="form-input">
                                    </div>
                                </div>
                                
                                <div>
                                    <label class="form-label" for="af-membre">Membre de l'association</label>
                                    <select id="af-membre" class="form-input">
                                        <option value="oui">Oui</option>
                                        <option value="non">Non</option>
                                    </select>
                                </div>
                                
                                <div>
                                    <label class="form-label" for="af-titre">Titre du projet</label>
                                    <input type="text" id="af-titre" class="form-input" required>
                                </div>
                                
                                <div>
                                    <label class="form-label" for="af-description">Description</label>
                                    <textarea id="af-description" rows="4" class="form-input" required></textarea>
                                </div>
                                
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                    <div>
                                        <label class="form-label" for="af-budget">Budget</label>
                                        <input type="number" id="af-budget" min="0" class="form-input" required>
                                    </div>
                                    <div>
                                        <label class="form-label" for="af-delai">Délai</label>
                                        <input type="text" id="af-delai" class="form-input" placeholder="Ex: 3 mois" required>
                                    </div>
                                </div>
                                
                                <div>
                                    <label class="form-label" for="af-image">Lien de l'image</label>
                                    <input type="url" id="af-image" class="form-input" placeholder="https://example.com/image.jpg">
                                </div>
                                
                                <div>
                                    <label class="form-label" for="af-website">Site Web</label>
                                    <input type="url" id="af-website" class="form-input" placeholder="https://example.com">
                                </div>
                                
                                <div>
                                    <label class="form-label" for="af-portfolio">Portfolio</label>
                                    <input type="url" id="af-portfolio" class="form-input" placeholder="https://portfolio.example.com">
                                </div>
                                
                                <div class="pt-4">
                                    <label class="form-label">Besoins</label>
                                    <div class="flex flex-wrap gap-4">
                                        <label class="inline-flex items-center">
                                            <input type="checkbox" name="af-besoins" value="site web" class="form-checkbox h-5 w-5">
                                            <span class="ml-2">Site web</span>
                                        </label>
                                        <label class="inline-flex items-center">
                                            <input type="checkbox" name="af-besoins" value="affiche" class="form-checkbox h-5 w-5">
                                            <span class="ml-2">Affiche</span>
                                        </label>
                                        <label class="inline-flex items-center">
                                            <input type="checkbox" name="af-besoins" value="portfolio" class="form-checkbox h-5 w-5">
                                            <span class="ml-2">Portfolio</span>
                                        </label>
                                    </div>
                                </div>
                                
                                <div class="flex justify-end pt-6">
                                    <button type="button" onclick="saveProject()" class="btn-ansar py-3 px-6 rounded-lg">
                                        Enregistrer
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>
                    
                    <!-- Liste Admin Business -->
                    <div id="admin-business-list" class="form-container hidden-section">
                        <div class="ansar-glass rounded-xl p-6">
                            <h2 class="text-2xl font-bold text-center mb-6 font-['Orbitron']">Gérer les Professionnels</h2>
                            <div class="overflow-x-auto">
                                <table class="min-w-full bg-opacity-20 bg-gray-800">
                                    <thead>
                                        <tr class="border-b border-gray-700">
                                            <th class="px-4 py-3 text-left">Nom</th>
                                            <th class="px-4 py-3 text-left">Métier</th>
                                            <th class="px-4 py-3 text-left">Expérience</th>
                                            <th class="px-4 py-3 text-left">Adresse</th>
                                            <th class="px-4 py-3 text-left">Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody id="business-list-body">
                                        <!-- Les données seront chargées dynamiquement ici -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Liste Admin Projets -->
                    <div id="admin-project-list" class="form-container hidden-section">
                        <div class="ansar-glass rounded-xl p-6">
                            <h2 class="text-2xl font-bold text-center mb-6 font-['Orbitron']">Gérer les Projets</h2>
                            <div class="overflow-x-auto">
                                <table class="min-w-full bg-opacity-20 bg-gray-800">
                                    <thead>
                                        <tr class="border-b border-gray-700">
                                            <th class="px-4 py-3 text-left">Titre</th>
                                            <th class="px-4 py-3 text-left">Porteur</th>
                                            <th class="px-4 py-3 text-left">Budget</th>
                                            <th class="px-4 py-3 text-left">Délai</th>
                                            <th class="px-4 py-3 text-left">Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody id="project-list-body">
                                        <!-- Les données seront chargées dynamiquement ici -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Configuration Firebase
        const firebaseConfig = {
            apiKey: "AIzaSyA-TpblN0YnekG2tKFRhjOwwEd80qke5pk",
            authDomain: "ansar-69617.firebaseapp.com",
            projectId: "ansar-69617",
            storageBucket: "ansar-69617.appspot.com",
            messagingSenderId: "1075104578958",
            appId: "1:1075104578958:web:b5d55c76def4d1d430b8df",
            measurementId: "G-5XLSPLXH81"
        };

        // Initialiser Firebase
        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();

        // Initialisation EmailJS
        emailjs.init("t69wuFYR5Gno3G4py");

        // Fonctions de navigation
        function showProjetSection(section) {
            const sections = [
                'main-interface',
                'promotion-form',
                'financement-form',
                'business-section',
                'admin-section',
                'admin-dashboard',
                'success-promotion',
                'success-financement',
                'business-modal'
            ];

            sections.forEach(id => {
                const element = document.getElementById(id);
                if (element) element.classList.add('hidden-section');
            });

            const targetId = {
                'promotion': 'promotion-form',
                'financement': 'financement-form',
                'business': 'business-section'
            }[section];

            if (targetId) {
                document.getElementById(targetId).classList.remove('hidden-section');
                if (section === 'business') loadBusinessCards();
            }

            document.getElementById('main-interface').classList.toggle('hidden-section', section !== 'business');
        }

        function showProjetAdmin() {
            showProjetSection('admin');
        }

        function showMainInterface() {
            showProjetSection('business');
        }

        function hideAdminSection() {
            showMainInterface();
        }

        // Fonction pour envoyer l'email de confirmation
        async function sendConfirmationEmail(nom, email) {
            try {
                await emailjs.init("b7VZLL9unc4ONEPby");
                await emailjs.send("service_v9clrbi", "template_p5w3d7a", {
                    nom: nom,
                    email: email
                });
            } catch (error) {
                console.error("Erreur lors de l'envoi de la confirmation :", error);
            }
        }

        // Soumettre le formulaire de promotion
        function submitPromotionForm() {
            const form = document.getElementById('promotionForm');
            const submitButton = form.querySelector('button[type="button"]');
            const data = {
                nom: document.getElementById('nom').value,
                dob: document.getElementById('dob').value,
                membre: document.querySelector('input[name="membre"]:checked')?.value,
                metier: document.getElementById('metier').value,
                experience: document.getElementById('experience').value,
                description: document.getElementById('description').value,
                adresse: document.getElementById('adresse').value,
                contact: document.getElementById('contact').value,
                email: document.getElementById('email').value,
                besoins: Array.from(document.querySelectorAll('input[name="besoins"]:checked')).map(input => input.value).join(', ')
            };

            if (Object.values(data).some(val => !val && val !== '')) {
                alert('Veuillez remplir tous les champs obligatoires.');
                return;
            }

            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (!emailRegex.test(data.email)) {
                alert('Veuillez entrer une adresse email valide.');
                return;
            }

            submitButton.disabled = true;
            submitButton.innerHTML = 'Envoi en cours...';

            emailjs.send('service_s761d89', 'template_01ycegg', data)
                .then(() => {
                    sendConfirmationEmail(data.nom, data.email);
                    document.getElementById('success-promotion-message').innerHTML = `Votre message a été soumis, ${data.nom}. Ansar vous contactera dans un délai de 24 à 48H.`;
                    document.getElementById('success-promotion').classList.remove('hidden-section');
                    document.getElementById('promotion-form').classList.add('hidden-section');
                    form.reset();
                })
                .catch(error => {
                    console.error('Erreur lors de l\'envoi de l\'email:', error);
                    alert('Une erreur est survenue lors de l\'envoi. Veuillez réessayer.');
                })
                .finally(() => {
                    submitButton.disabled = false;
                    submitButton.innerHTML = 'Envoyer mon dossier';
                });
        }

        // Soumettre le formulaire de financement
        function submitFinancementForm() {
            const form = document.getElementById('financementForm');
            const submitButton = form.querySelector('button[type="button"]');
            const data = {
                nom: document.getElementById('f-nom').value,
                dob: document.getElementById('f-dob').value,
                membre: document.querySelector('input[name="f-membre"]:checked')?.value,
                titre: document.getElementById('titre-projet').value,
                description: document.getElementById('description-projet').value,
                budget: document.getElementById('budget').value,
                delai: document.getElementById('delai').value,
                besoins: Array.from(document.querySelectorAll('input[name="f-besoins"]:checked')).map(input => input.value).join(', ')
            };

            if (Object.values(data).some(val => !val && val !== '')) {
                alert('Veuillez remplir tous les champs obligatoires.');
                return;
            }

            submitButton.disabled = true;
            submitButton.innerHTML = 'Envoi en cours...';

            emailjs.send('service_s761d89', 'template_evir7gc', data)
                .then(() => {
                    document.getElementById('success-financement-message').innerHTML = `Votre message a été soumis, ${data.nom}. Ansar vous contactera dans un délai de 3 à 5 jours.`;
                    document.getElementById('success-financement').classList.remove('hidden-section');
                    document.getElementById('financement-form').classList.add('hidden-section');
                    form.reset();
                })
                .catch(error => {
                    console.error('Erreur lors de l\'envoi de l\'email:', error);
                    alert('Une erreur est survenue lors de l\'envoi. Veuillez réessayer.');
                })
                .finally(() => {
                    submitButton.disabled = false;
                    submitButton.innerHTML = 'Envoyer mon dossier';
                });
        }

        // Masquer les messages de succès
        function hideSuccessMessage(type) {
            document.getElementById(`success-${type}`).classList.add('hidden-section');
            showMainInterface();
        }

        function hideBusinessDetails() {
            document.getElementById('business-modal').classList.add('hidden-section');
        }

        // Fonctions admin
        function verifyAdminCodes() {
            const code1 = document.getElementById('code1').value;
            const code2 = document.getElementById('code2').value;

            if (code1 === 'admin123' && code2 === 'admin456') {
                document.getElementById('admin-section').classList.add('hidden-section');
                document.getElementById('admin-dashboard').classList.remove('hidden-section');
            } else {
                alert('Codes incorrects. Espace réservé aux admin.');
            }
        }

        function showAdminForm(type) {
            const forms = ['admin-promotion-form', 'admin-financement-form', 'admin-business-list', 'admin-project-list'];
            forms.forEach(form => document.getElementById(form).classList.add('hidden-section'));
            document.getElementById(`admin-${type}-form`).classList.remove('hidden-section');
        }

        function showAdminBusinessList() {
            const forms = ['admin-promotion-form', 'admin-financement-form', 'admin-business-list', 'admin-project-list'];
            forms.forEach(form => document.getElementById(form).classList.add('hidden-section'));
            document.getElementById('admin-business-list').classList.remove('hidden-section');
            loadBusinessList();
        }

        function showAdminProjectList() {
            const forms = ['admin-promotion-form', 'admin-financement-form', 'admin-business-list', 'admin-project-list'];
            forms.forEach(form => document.getElementById(form).classList.add('hidden-section'));
            document.getElementById('admin-project-list').classList.remove('hidden-section');
            loadProjectList();
        }

        // Enregistrer un métier
        function saveBusiness() {
            const data = {
                nom: document.getElementById('a-nom').value,
                dob: document.getElementById('a-dob').value,
                membre: document.getElementById('a-membre').value,
                metier: document.getElementById('a-metier').value,
                experience: parseInt(document.getElementById('a-experience').value),
                description: document.getElementById('a-description').value,
                adresse: document.getElementById('a-adresse').value,
                contact: document.getElementById('a-contact').value,
                email: document.getElementById('a-email').value,
                image: document.getElementById('a-image').value || 'https://via.placeholder.com/150',
                services: Array.from(document.querySelectorAll('input[name="a-services"]:checked')).map(input => input.value),
                website: document.getElementById('a-website').value || '',
                portfolio: document.getElementById('a-portfolio').value || '',
                createdAt: new Date()
            };

            if (!data.nom || !data.metier || !data.experience || !data.description || !data.adresse || !data.contact) {
                alert('Veuillez remplir tous les champs obligatoires.');
                return;
            }

            db.collection('businesses').add(data)
                .then(() => {
                    alert('Métier enregistré avec succès !');
                    document.getElementById('adminPromotionForm').reset();
                    showAdminForm('promotion');
                })
                .catch(error => {
                    console.error('Erreur lors de l\'enregistrement du métier :', error);
                    alert('Une erreur est survenue.');
                });
        }

        // Enregistrer un projet
        function saveProject() {
            const data = {
                nom: document.getElementById('af-nom').value,
                dob: document.getElementById('af-dob').value,
                membre: document.getElementById('af-membre').value,
                titre: document.getElementById('af-titre').value,
                description: document.getElementById('af-description').value,
                budget: parseInt(document.getElementById('af-budget').value),
                delai: document.getElementById('af-delai').value,
                image: document.getElementById('af-image').value || 'https://via.placeholder.com/150',
                besoins: Array.from(document.querySelectorAll('input[name="af-besoins"]:checked')).map(input => input.value),
                website: document.getElementById('af-website').value || '',
                portfolio: document.getElementById('af-portfolio').value || '',
                createdAt: new Date()
            };

            if (!data.nom || !data.titre || !data.description || !data.budget || !data.delai) {
                alert('Veuillez remplir tous les champs obligatoires.');
                return;
            }

            db.collection('projects').add(data)
                .then(() => {
                    alert('Projet enregistré avec succès !');
                    document.getElementById('adminFinancementForm').reset();
                    showAdminForm('financement');
                })
                .catch(error => {
                    console.error('Erreur lors de l\'enregistrement du projet :', error);
                    alert('Une erreur est survenue.');
                });
        }

        // Charger les cartes business
        async function loadBusinessCards() {
            const businessCards = document.getElementById('business-cards');
            businessCards.innerHTML = '<p class="text-center">Chargement...</p>';

            try {
                const snapshot = await db.collection('businesses').orderBy('createdAt', 'desc').get();
                const businesses = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));

                if (businesses.length === 0) {
                    businessCards.innerHTML = '<p class="text-center">Aucun professionnel disponible.</p>';
                    return;
                }

                businessCards.innerHTML = businesses.map(business => `
                    <div class="business-card">
                        <div class="h-48 bg-blue-500 flex items-center justify-center">
                            <img src="${business.image}" alt="${business.metier}" class="w-full h-full object-cover">
                        </div>
                        <div class="p-6">
                            <h3 class="text-xl font-bold mb-2">${business.metier}</h3>
                            <p class="mb-2">${business.nom}</p>
                            <div class="flex items-center mb-2">
                                <i class="fas fa-calendar-alt mr-2"></i>
                                <span>${business.experience} ans d'expérience</span>
                            </div>
                            <div class="flex items-center mb-4">
                                <i class="fas fa-map-marker-alt mr-2"></i>
                                <span>${business.adresse}</span>
                            </div>
                            <button onclick="showBusinessDetails('${business.id}', 'business')" class="w-full btn-ansar py-2 px-4 rounded">
                                En savoir plus
                            </button>
                        </div>
                    </div>
                `).join('');
            } catch (error) {
                console.error('Erreur lors du chargement des professionnels:', error);
                businessCards.innerHTML = '<p class="text-center text-red-500">Erreur lors du chargement.</p>';
            }
        }

        // Afficher les détails d'un métier/projet
        function showBusinessDetails(id, type) {
            const collection = type === 'business' ? 'businesses' : 'projects';
            db.collection(collection).doc(id).get()
                .then(doc => {
                    if (doc.exists) {
                        const data = doc.data();
                        document.getElementById('modal-title').textContent = data.nom;
                        document.getElementById('modal-content').innerHTML = `
                            <div class="flex flex-col md:flex-row gap-6">
                                <div class="md:w-1/3">
                                    <div class="h-48 bg-gray-200 rounded-lg overflow-hidden mb-4">
                                        <img src="${data.image}" alt="${data.nom}" class="w-full h-full object-cover">
                                    </div>
                                    <h4 class="text-xl font-bold">${data.nom}</h4>
                                    <div class="flex items-center mt-2">
                                        <i class="fas fa-calendar-alt mr-2"></i>
                                        <span>${data.experience ? `${data.experience} ans d'expérience` : data.budget + ' FCFA'}</span>
                                    </div>
                                    <div class="flex items-center mt-2">
                                        <i class="fas fa-map-marker-alt mr-2"></i>
                                        <span>${data.adresse || data.delai}</span>
                                    </div>
                                    <div class="flex items-center mt-2">
                                        <i class="fas fa-phone mr-2"></i>
                                        <span>${data.contact || 'Non spécifié'}</span>
                                    </div>
                                    <div class="flex items-center mt-2">
                                        <i class="fas fa-envelope mr-2"></i>
                                        <span>${data.email || 'Non spécifié'}</span>
                                    </div>
                                    <div class="flex items-center mt-2">
                                        <i class="fas fa-globe mr-2"></i>
                                        <span>${data.website ? `<a href="${data.website}" target="_blank">Site Web</a>` : 'Non spécifié'}</span>
                                    </div>
                                    <div class="flex items-center mt-2">
                                        <i class="fas fa-briefcase mr-2"></i>
                                        <span>${data.portfolio ? `<a href="${data.portfolio}" target="_blank">Portfolio</a>` : 'Non spécifié'}</span>
                                    </div>
                                </div>
                                <div class="md:w-2/3">
                                    <h4 class="text-lg font-bold mb-2">À propos</h4>
                                    <p>${data.description}</p>
                                </div>
                            </div>
                        `;
                        document.getElementById('business-modal').classList.remove('hidden-section');
                    } else {
                        alert('Métier ou projet non trouvé.');
                    }
                })
                .catch(error => {
                    console.error('Erreur lors du chargement des détails :', error);
                    alert('Une erreur est survenue.');
                });
        }

        // Charger la liste des métiers
        function loadBusinessList() {
            const businessTableBody = document.getElementById('business-list-body');
            businessTableBody.innerHTML = '';
            db.collection('businesses').orderBy('createdAt', 'desc').get()
                .then(querySnapshot => {
                    if (querySnapshot.empty) {
                        businessTableBody.innerHTML = '<tr><td colspan="5" class="py-3 px-4 text-center">Aucun métier disponible.</td></tr>';
                        return;
                    }
                    querySnapshot.forEach(doc => {
                        const data = doc.data();
                        businessTableBody.innerHTML += `
                            <tr>
                                <td class="py-3 px-4">${data.nom}</td>
                                <td class="py-3 px-4">${data.metier}</td>
                                <td class="py-3 px-4">${data.experience} ans</td>
                                <td class="py-3 px-4">${data.adresse}</td>
                                <td class="py-3 px-4 text-center">
                                    <button onclick="editBusiness('${doc.id}')" class="text-blue-600 hover:text-blue-800 mr-3">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                    <button onclick="deleteBusiness('${doc.id}')" class="text-red-600 hover:text-red-800">
                                        <i class="fas fa-trash-alt"></i>
                                    </button>
                                </td>
                            </tr>`;
                    });
                })
                .catch(error => {
                    console.error('Erreur lors du chargement des métiers :', error);
                    businessTableBody.innerHTML = '<tr><td colspan="5" class="py-3 px-4 text-center text-red-500">Erreur lors du chargement.</td></tr>';
                });
        }

        // Charger la liste des projets
        function loadProjectList() {
            const projectTableBody = document.getElementById('project-list-body');
            projectTableBody.innerHTML = '';
            db.collection('projects').orderBy('createdAt', 'desc').get()
                .then(querySnapshot => {
                    if (querySnapshot.empty) {
                        projectTableBody.innerHTML = '<tr><td colspan="5" class="py-3 px-4 text-center">Aucun projet disponible.</td></tr>';
                        return;
                    }
                    querySnapshot.forEach(doc => {
                        const data = doc.data();
                        projectTableBody.innerHTML += `
                            <tr>
                                <td class="py-3 px-4">${data.titre}</td>
                                <td class="py-3 px-4">${data.nom}</td>
                                <td class="py-3 px-4">${data.budget} FCFA</td>
                                <td class="py-3 px-4">${data.delai}</td>
                                <td class="py-3 px-4 text-center">
                                    <button onclick="editProject('${doc.id}')" class="text-blue-600 hover:text-blue-800 mr-3">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                    <button onclick="deleteProject('${doc.id}')" class="text-red-600 hover:text-red-800">
                                        <i class="fas fa-trash-alt"></i>
                                    </button>
                                </td>
                            </tr>`;
                    });
                })
                .catch(error => {
                    console.error('Erreur lors du chargement des projets :', error);
                    projectTableBody.innerHTML = '<tr><td colspan="5" class="py-3 px-4 text-center text-red-500">Erreur lors du chargement.</td></tr>';
                });
        }

        // Éditer un métier
        function editBusiness(businessId) {
            db.collection('businesses').doc(businessId).get()
                .then(doc => {
                    if (doc.exists) {
                        const data = doc.data();
                        document.getElementById('a-nom').value = data.nom;
                        document.getElementById('a-dob').value = data.dob || '';
                        document.getElementById('a-membre').value = data.membre;
                        document.getElementById('a-metier').value = data.metier;
                        document.getElementById('a-experience').value = data.experience;
                        document.getElementById('a-description').value = data.description;
                        document.getElementById('a-adresse').value = data.adresse;
                        document.getElementById('a-contact').value = data.contact;
                        document.getElementById('a-email').value = data.email || '';
                        document.getElementById('a-image').value = data.image || '';
                        document.getElementById('a-website').value = data.website || '';
                        document.getElementById('a-portfolio').value = data.portfolio || '';
                        document.querySelectorAll('input[name="a-services"]').forEach(input => {
                            input.checked = data.services.includes(input.value);
                        });

                        const saveButton = document.querySelector('#adminPromotionForm button');
                        saveButton.textContent = 'Mettre à jour';
                        saveButton.onclick = () => updateBusiness(businessId);
                        showAdminForm('promotion');
                    }
                })
                .catch(error => {
                    console.error('Erreur lors du chargement du métier :', error);
                    alert('Une erreur est survenue.');
                });
        }

        // Mettre à jour un métier
        function updateBusiness(businessId) {
            const data = {
                nom: document.getElementById('a-nom').value,
                dob: document.getElementById('a-dob').value,
                membre: document.getElementById('a-membre').value,
                metier: document.getElementById('a-metier').value,
                experience: parseInt(document.getElementById('a-experience').value),
                description: document.getElementById('a-description').value,
                adresse: document.getElementById('a-adresse').value,
                contact: document.getElementById('a-contact').value,
                email: document.getElementById('a-email').value,
                image: document.getElementById('a-image').value || 'https://via.placeholder.com/150',
                services: Array.from(document.querySelectorAll('input[name="a-services"]:checked')).map(input => input.value),
                website: document.getElementById('a-website').value || '',
                portfolio: document.getElementById('a-portfolio').value || '',
                updatedAt: new Date()
            };

            db.collection('businesses').doc(businessId).update(data)
                .then(() => {
                    alert('Métier mis à jour avec succès !');
                    document.getElementById('adminPromotionForm').reset();
                    const saveButton = document.querySelector('#adminPromotionForm button');
                    saveButton.textContent = 'Enregistrer';
                    saveButton.onclick = saveBusiness;
                    showAdminBusinessList();
                })
                .catch(error => {
                    console.error('Erreur lors de la mise à jour du métier :', error);
                    alert('Une erreur est survenue.');
                });
        }

        // Supprimer un métier
        function deleteBusiness(businessId) {
            if (confirm('Voulez-vous vraiment supprimer ce métier ?')) {
                db.collection('businesses').doc(businessId).delete()
                    .then(() => {
                        alert('Métier supprimé avec succès !');
                        loadBusinessList();
                    })
                    .catch(error => {
                        console.error('Erreur lors de la suppression du métier :', error);
                        alert('Une erreur est survenue.');
                    });
            }
        }

        // Éditer un projet
        function editProject(projectId) {
            db.collection('projects').doc(projectId).get()
                .then(doc => {
                    if (doc.exists) {
                        const data = doc.data();
                        document.getElementById('af-nom').value = data.nom;
                        document.getElementById('af-dob').value = data.dob || '';
                        document.getElementById('af-membre').value = data.membre;
                        document.getElementById('af-titre').value = data.titre;
                        document.getElementById('af-description').value = data.description;
                        document.getElementById('af-budget').value = data.budget;
                        document.getElementById('af-delai').value = data.delai;
                        document.getElementById('af-image').value = data.image || '';
                        document.getElementById('af-website').value = data.website || '';
                        document.getElementById('af-portfolio').value = data.portfolio || '';
                        document.querySelectorAll('input[name="af-besoins"]').forEach(input => {
                            input.checked = data.besoins.includes(input.value);
                        });

                        const saveButton = document.querySelector('#adminFinancementForm button');
                        saveButton.textContent = 'Mettre à jour';
                        saveButton.onclick = () => updateProject(projectId);
                        showAdminForm('financement');
                    }
                })
                .catch(error => {
                    console.error('Erreur lors du chargement du projet :', error);
                    alert('Une erreur est survenue.');
                });
        }

        // Mettre à jour un projet
        function updateProject(projectId) {
            const data = {
                nom: document.getElementById('af-nom').value,
                dob: document.getElementById('af-dob').value,
                membre: document.getElementById('af-membre').value,
                titre: document.getElementById('af-titre').value,
                description: document.getElementById('af-description').value,
                budget: parseInt(document.getElementById('af-budget').value),
                delai: document.getElementById('af-delai').value,
                image: document.getElementById('af-image').value || 'https://via.placeholder.com/150',
                besoins: Array.from(document.querySelectorAll('input[name="af-besoins"]:checked')).map(input => input.value),
                website: document.getElementById('af-website').value || '',
                portfolio: document.getElementById('af-portfolio').value || '',
                updatedAt: new Date()
            };

            db.collection('projects').doc(projectId).update(data)
                .then(() => {
                    alert('Projet mis à jour avec succès !');
                    document.getElementById('adminFinancementForm').reset();
                    const saveButton = document.querySelector('#adminFinancementForm button');
                    saveButton.textContent = 'Enregistrer';
                    saveButton.onclick = saveProject;
                    showAdminProjectList();
                })
                .catch(error => {
                    console.error('Erreur lors de la mise à jour du projet :', error);
                    alert('Une erreur est survenue.');
                });
        }

        // Supprimer un projet
        function deleteProject(projectId) {
            if (confirm('Voulez-vous vraiment supprimer ce projet ?')) {
                db.collection('projects').doc(projectId).delete()
                    .then(() => {
                        alert('Projet supprimé avec succès !');
                        loadProjectList();
                    }) 
                    .catch(error => {
                        console.error('Erreur lors de la suppression du projet :', error); 
                        alert('Une erreur est survenue.');
                    });
            }
        } 

        // Initialisation
        document.addEventListener('DOMContentLoaded', () => {
            showProjetSection('business');
        });
    </script>
</body>
</html>
